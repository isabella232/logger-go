# logger-go

Lob's logger for Go.

## Usage

Include the logger-go package in your import.

```go
import (
    "github.com/lob/logger-go"
)
```

Logs will always include:

* logging level
* hostname
* release
  * Defined by the environment variable `RELEASE`
  * This is set by Convox in staging/production environments
* timestamp
* nanoseconds

Logs will always be written to stdout. The package ships with a global logger so you can easily emit logs without having to instantiate a logger.

```go
logger.Info("Hello, world!", map[string]interface{}{"fun": "things"})
// Outputs: {"level":"info","host":"Kyle.local","release":"test12345","data":{"fun":"things"},"nanoseconds":1532024420744842400,"timestamp":"2018-07-19T11:20:20-07:00","message":"Hello, world!"}
```

Alternatively, you can instantiate your own logger. This is useful if you want to attach additional data or top-level information to your logger, which will force all logs emitted by that logger to include that info.

```go
l1 := logger.New().ID("test")
l2 := l1.Data(Data{"test": "data"})

l1.Info("hi")
// Outputs {"level":"info","host":"HOSTNAME","release":"RELEASE","id":"test","nanoseconds":1531945897647586415,"timestamp":"2018-07-18T13:31:37-07:00","message":"hi"}
l2.Info("hi")
// Outputs {"level":"info","host":"HOSTNAME","release":"RELEASE","id":"test","data":{"test":"data"},"nanoseconds":1531945897647593709,"timestamp":"2018-07-18T13:31:37-07:00","message":"hi"}
```

## Development

```sh
# Install necessary dependencies for development
make setup

# Ensure dependencies are safe, complete, and reproducible
make deps

# Run tests and generate test coverage report
make test

# Run linter
make lint

# Remove temporary files generated by the build command and the build directory
make clean

# Prepare release by cleaning, getting deps, linting, building, and testing
make release
```

## Help

The following command generates a list of all `make` commands.

```sh
make help
```

## FAQ

### Tweaking code coverage

See this [blog post about coverage in Go](https://blog.golang.org/cover).

### Tweaking the linter

See the [gometalinter documentation](https://github.com/alecthomas/gometalinter#installing).
